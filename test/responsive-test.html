<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>

  <!-- Import the paper-audio-player element -->
  <link rel="import" href="../paper-audio-player.html">
</head>
<body>

<!-- Basic player -->
<paper-audio-player id="resizing" src="./pink-shades-o-pnr.mp3"></paper-audio-player>

<script>
  var resizingPlayer = document.getElementById('resizing');

  suite('<paper-audio-player>', function() {

    test('on window resize both titles have the same width', function(done) {
      resizingPlayer.$.audio.play();
      setTimeout(function(){
        resizingPlayer.$.audio.pause();
        var titleBefore = resizingPlayer.querySelector('#title').getBoundingClientRect(),
            title2Before = resizingPlayer.querySelector('#title2').getBoundingClientRect();
        assert.equal(Math.round(title2Before.width), titleBefore.width);

        // resize document
        document.body.style.width = window.innerWidth - 200 + "px";
        var titleAfter = resizingPlayer.querySelector('#title').getBoundingClientRect(),
            title2After = resizingPlayer.querySelector('#title2').getBoundingClientRect();
        assert.equal(Math.round(title2After.width), titleAfter.width);

        done();
      }, 5000);

    });

  });
</script>

</body>
</html>